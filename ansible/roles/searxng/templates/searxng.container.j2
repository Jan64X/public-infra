[Unit]
Description=SearXNG Privacy Search Engine
After=network-online.target

[Container]
ContainerName=searxng
Image=docker.io/searxng/searxng:latest
AutoUpdate=registry
Pull=newer
Volume=/etc/searxng/settings.yml:/etc/searxng/settings.yml:ro
Volume=/etc/searxng/custom/simple/img/searxng.png:/usr/local/searxng/searx/static/themes/simple/img/searxng.png:ro
Environment=SEARXNG_BASE_URL={{ searxng_base_url | default('http://' + ansible_host + ':8080/') }}
Environment=UWSGI_WORKERS=4
Environment=UWSGI_THREADS=4
Environment=INSTANCE_NAME=NebulaXNG
DropCapability=ALL
AddCapability=CHOWN SETGID SETUID
Network=vps-services.network
LogDriver=journald

[Service]
Restart=always
TimeoutStartSec=300

[Install]
WantedBy=multi-user.target
